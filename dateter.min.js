(function(b){var k={backgroundClass:"calendar-background",borderStyle:"solid",borderWidth:"1px",borderClass:"calendar-border",borderColor:"",borderRoundClass:"calendar-corner",calHolder:"",callbackFn:"",cellHeight:0,cellWidth:0,calendarCell:"calendar-cell",daysInMonth:31,dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysToHighlight:{},displayHeader:true,fontColor:"calendar-fontColor",headerSelectors:{title:-1,back:-1,next:-1},height:"500px",highLightColors:["#3EC1FF",
"#008FB2","#FF8B00","#B22D10","#FF2000"],highLightSize:"14px",highLightToday:false,highLightTodayClass:"calendar-cell-today",initialFetchMonths:0,largeDisplay:false,leapYear:false,month:-1,monthsMoved:0,monthStartOn:0,monthSwitchFn:"",name:"",noClick:false,offsetX:"0",offsetY:"0",pastDayShades:true,pastDayShadeClass:"calendar-pastShade",position:[],popUpBackgroundClass:"calendar-cell",popUpBox:"<div style='background-Color:replace-color'>replace-title replace-startTime replace-startTime replace-note replace-location<div id='popUpCloseButton' style='height:10px;width:10px;background-Color:#000;border:1px #00000 solid;'></div></div>",
showDaynames:false,shadeClass:"calendar-shade",smallDayNames:["S","M","T","W","T","F","S"],startMonth:-1,startofMonth:0,startYear:-1,timeSelector:false,uniqueName:"dateter"+(new Date).getTime(),width:"500px",year:-1},l=true,m="";b.fn.dateter=function(a,d,c){target=b(this);m=b(this);Settings=b.extend({},k,a);Settings.callbackFn=d?d:false;Settings.monthSwitchFn=c?c:false;if(Settings.timeSelector){Settings.cellHeight=Math.floor((parseInt(Settings.height)-40)/7);Settings.cellWidth=Math.floor((parseInt(Settings.width)-
40)/7)}else{Settings.cellHeight=Math.floor((parseInt(Settings.height)-20)/7);Settings.cellWidth=Math.floor((parseInt(Settings.width)-20)/7)}target.data("Settings",Settings);b.fn.dateter.init(target)};b.fn.keyInArray=function(a,d){for(v_key in d)if(a==d[v_key])return v_key};b.fn.dateter.init=function(a){if(a.data("Settings").year==-1)a.data("Settings").year=Date.today().toString("yyyy");if(a.data("Settings").month==-1)a.data("Settings").month=Date.today().toString("M");a.data("Settings").startofMonth=
b.fn.keyInArray(Date.today().set({day:1}).toString("dddd"),a.data("Settings").dayNames);a.data("Settings").daysInMonth=Date.getDaysInMonth(a.data("Settings").year,a.data("Settings").month-1);a.data("Settings").leapYear=Date.isLeapYear(a.data("Settings").year);a.data("Settings").name=a.data("Settings").uniqueName;a.data("Settings").monthName=Date.today().set({month:parseInt(a.data("Settings").month)-1}).toString("MMMM");a.data("Settings").position=a.position();if(a.data("Settings").noClick===true){if(a.data("Settings").largeDisplay===
true){settingsHold=a.data("Settings");settingsHold.cellWidth="14.2%";settingsHold.cellHeight="16.6%";settingsHold.width="100%";a.data("Settings",settingsHold);if(a.data("Settings").headerSelectors.title!=-1){a.empty().html(b("<table/>"));a.data("Settings").headerSelectors.next!=-1&&b.fn.dateter.moveMonth(a.data("Settings").headerSelectors.next,a.data("Settings"),a,1);a.data("Settings").headerSelectors.back!=-1&&b.fn.dateter.moveMonth(a.data("Settings").headerSelectors.back,a.data("Settings"),a,-1)}}b.fn.dateter.drawCalendar(a,
a.data("Settings"))}else{b("#"+a.data("Settings").uniqueName).replaceWith();b(a).click(function(){b("#"+a.data("Settings").uniqueName).css({position:"absolute",top:parseInt(b(this).offset().top+parseInt(a.data("Settings").offsetY)),left:parseInt(b(this).offset().left+parseInt(a.data("Settings").offsetX))});Shadow=b("<div/>",{id:"Shadow",css:{"z-index":999999,display:"block",top:0,left:0,height:b("body").height(),width:b("body").width(),position:"absolute"},click:function(){b(".dateterPopup").fadeOut(200);
b("#Shadow").remove();a.show()}}).hide();b("body").append(Shadow);b(".dateterPopup").hide();b("#"+a.data("Settings").uniqueName).css("z-index",1E6).show();b("#Shadow").show()});b("body").append(calGlobal=b("<div/>",{id:a.data("Settings").uniqueName,"class":a.data("Settings").borderClass+" "+a.data("Settings").borderRoundClass+" "+a.data("Settings").backgroundClass+" "+a.data("Settings").shadeClass+" dateterPopup"}).hide());calGlobal.append(calBox=b("<div/>"));b.fn.dateter.drawCalendar(calBox,a.data("Settings"),
a);heightAdjust=b(a).height();heightAdjust=0}};b.fn.dateter.moveMonth=function(a,d,c,e,f){c.data("Settings",b.extend(true,c.data("Settings"),d));localsettings=c.data("Settings");a.click(function(){l=false;c.data("Settings").monthsMoved=parseInt(c.data("Settings").monthsMoved+e);if(c.data("Settings").startYear==-1){var g=Date.today().add(c.data("Settings").monthsMoved).months().toString("M"),i=Date.today().add(c.data("Settings").monthsMoved).months().toString("yyyy"),h=b.fn.keyInArray(Date.parse(parseInt(g)+
"/1/"+i).toString("dddd"),c.data("Settings").dayNames);Date.today().add(c.data("Settings").monthsMoved+e).months().toString("yyyy");Date.today().add(c.data("Settings").monthsMoved+e).months().toString("M")}else{g=Date.parse(c.data("Settings").startYear+"/1/"+c.data("Settings").year).add(c.data("Settings").monthsMoved).months().toString("M");i=Date.parse(c.data("Settings").startMonth+"/1/"+c.data("Settings").year).add(c.data("Settings").monthsMoved).months().toString("yyyy");h=b.fn.keyInArray(Date.parse(parseInt(g)+
"/1/"+i).toString("dddd"),c.data("Settings").dayNames)}b.fn.dateter.drawCalendar(c,{height:c.data("Settings").height,monthName:Date.today().set({month:parseInt(g)-1}).toString("MMMM")+" "+i,year:i,monthsMoved:c.data("Settings").monthsMoved,month:g,startofMonth:h,daysToHighlight:c.data("Settings").daysToHighlight,daysInMonth:Date.getDaysInMonth(i,g-1)},f)})};b.fn.dateter.createPopupbox=function(a,d){var c={title:"replace-title",note:"replace-note",location:"replace-location",color:"replace-color",
startTime:"replace-startTime",endTime:"replace-startTime"};a=a;for(var e in c)for(;a.indexOf(c[e])>-1;)a=a.replace(c[e],d[e]);a=$(a).attr("id","eventPopBox").addClass("eventPopBoxCSS");a.find("#popUpCloseButton").click(function(){b(".eventPopBoxCSS").replaceWith("");b("#eventPopBox").replaceWith("")});return a};b.fn.dateter.drawHighlight=function(a){b(".dateterHighlight").replaceWith();dayTest=false;try{dayTest=a.daysToHighlight[parseInt(a.year)][parseInt(a.month)]}catch(d){dayTest=false}if(dayTest){lsdth=
a.daysToHighlight[parseInt(a.year)][parseInt(a.month)];b.each(lsdth,function(c,e){var f="date-"+parseInt(a.year)+"-"+parseInt(a.month)+"-"+c;eventBox=b("#eventBox"+c);if(a.largeDisplay===true){eventBox.empty();ca2=eventBox.height()-20;if(ca2<0)ca2=15;displayAmount=100;var g=0,i=0;b.each(e,function(h,j){g++;if(h>displayAmount-1)i++;else eventBox.css({overflow:"hidden"}).append(b("<div/>",{id:"cs-"+j.id,name:j.name,css:{"float":"left",textAlign:"left",height:a.highLightSize,overflow:"hidden",padding:"2px",
margin:"2px",width:a.highLightSize,backgroundColor:a.highLightColors[j.location_id]},"class":a.borderClass+" "+a.borderRoundClass+" dateterHighlight "+f+" location-"+j.location_id,click:function(){b(".eventPopBoxCSS").replaceWith("");position=b(this).offset();b("body").append(popBox=b.fn.dateter.createPopupbox(a.popUpBox,{title:j.name,note:j.comment,location:j.location_name,color:a.highLightColors[j.location_id],startTime:j.timeS,endTime:j.timeE}));popBox.css({position:"absolute",top:position.top,
left:position.left,zIndex:500});eventBoxShift=b("body").outerWidth()-(popBox.outerWidth()+position.left);if(eventBoxShift<0){eventBoxLeft=popBox.position().left;Adjustment=parseInt(eventBoxLeft)+parseInt(eventBoxShift)-5;popBox.css({left:Adjustment})}}}))})}else{smallDay=parseInt(c)+1;b("#"+a.uniqueName+"d"+smallDay,{css:{backgroundColor:a.highLightColors[0]}})}})}else setTimeout("jQuery.fn.dateter.drawHighlight(localSettings)",300)};b.fn.dateter.resize=function(a,d){$("#calBox"+d.data("Settings").uniqueName).css({height:a}).find(".clickarea2").css({height:a/
6-15})};b.fn.dateter.drawCalendar=function(a,d,c){localSettings=b.extend(true,a.data("Settings"),d);a.data("Settings",localSettings);var e="";if(localSettings.displayHeader){a.html(b("<table/>",{css:{height:"20px",width:"100%"}}).attr({cellpadding:0,cellspacing:0}).addClass(localSettings.shadeClass).html(b("<tr/>").html(b("<td/>",{id:localSettings.uniqueName+"calBackMonth",css:{"text-align":"center",width:"20px",cursor:"pointer"},html:b("<font/>",{html:"&laquo;"})})).append(b("<td/>",{id:localSettings.uniqueName+
"caltitle",css:{width:"auto","text-align":"center","font-size":"14px"},html:b("<font/>",{html:Date.today().set({month:parseInt(localSettings.month)-1}).toString("MMMM")+" "+localSettings.year}).addClass(localSettings.fontColor)})).append(b("<td/>",{id:localSettings.uniqueName+"calNextMonth",css:{"text-align":"center",width:"20px",cursor:"pointer"},html:b("<font/>",{html:"&raquo;"}).addClass(localSettings.fontColor)}))));b.fn.dateter.moveMonth(b("#"+localSettings.uniqueName+"calBackMonth"),localSettings,
a,-1,c);b.fn.dateter.moveMonth(b("#"+localSettings.uniqueName+"calNextMonth"),localSettings,a,1,c)}else{a.html(b("<table/>"));localSettings.headerSelectors.title!=-1&&localSettings.headerSelectors.title.html(Date.today().set({month:parseInt(localSettings.month)-1}).toString("MMMM")+" "+localSettings.year)}var f=d=0;e=0;if(localSettings.displayHeader){realCellHeight=parseInt(parseInt(localSettings.height)-20)/6;realCellHeight--;e=localSettings.height-20}else{realCellHeight=parseInt(localSettings.height)/
6;realCellHeight--;e=localSettings.height}a.append(e=b("<table/>").attr({cellpadding:0,cellspacing:0,border:0}).css({width:localSettings.width,height:e}).addClass(localSettings.borderClass).attr({id:"calBox"+localSettings.uniqueName}));e.empty();for(var g=0;g<6;g++){e.append(b("<tr/>",{id:localSettings.uniqueName+"w"+g}));for(var i=0;i<7;i++){b("#"+localSettings.uniqueName+"w"+g).append(b("<td/>",{css:{fontSize:"11px",textAlign:"center",width:localSettings.cellWidth,height:localSettings.cellHeight},
"class":localSettings.borderClass,id:localSettings.uniqueName+"d"+d}));var h=[];h[0]=localSettings.year==parseInt(Date.today().toString("yyyy"));h[1]=localSettings.year<parseInt(Date.today().toString("yyyy"));h[2]=h[0]&&localSettings.month<parseInt(Date.today().toString("M"));h[3]=h[0]&&localSettings.month==Date.today().toString("M")&&f<parseInt(Date.today().toString("d"));if(d>=localSettings.startofMonth&&f<localSettings.daysInMonth){curDay=b("#"+localSettings.uniqueName+"d"+d);f++;if(localSettings.largeDisplay===
true)curDay.html(b("<div/>",{id:"dayBox"+f,css:{overflow:"hidden",height:"100%",width:"100%"},html:clickArea=b("<div/>",{css:{borderTop:0,borderLeft:0,borderRight:0,width:"100%",cursor:"pointer",height:"15px"},"class":localSettings.borderClass+" "+localSettings.shadeClass+" "+localSettings.fontColor,html:f})}).append(clickArea2=b("<div/>",{id:"eventBox"+f,css:{borderTop:0,borderLeft:0,borderRight:0,overFlow:"hidden",cursor:"pointer",width:"100%",height:parseInt(realCellHeight-15)},"class":"clickarea2"})));
else clickArea=curDay.css({height:realCellHeight,cursor:"pointer"}).addClass(localSettings.fontColor).html(f);if(localSettings.pastDayShades)curDay.addClass(h[1]||h[2]||h[3]?localSettings.pastDayShadeClass:localSettings.calendarCell).css({cursor:"pointer"});localSettings.highLightToday&&Date.today().toString("d")==f&&Date.today().toString("M")==localsettings.month&&Date.today().toString("yyyy")==localsettings.year&&curDay.addClass(localSettings.highLightTodayClass).removeClass(localSettings.pastDayShadeClass).css({cursor:"pointer"});
!localSettings.pastDayShades&&!(Date.today().toString("d")==f&&Date.today().toString("M")==localsettings.month&&Date.today().toString("yyyy")==localsettings.year)&&curDay.addClass(localSettings.calendarCell);clickArea.click(function(){if(a.data("Settings").callbackFn){b("#Shadow").remove();a.data("Settings").callbackFn(localSettings.month,b(this).text(),localSettings.year);if(a.data("Settings").noClick===false){c.show();a.parent().fadeOut(300)}}})}else{curDay=b("#"+localSettings.uniqueName+"d"+d);
localSettings.largeDisplay===true?curDay.html(b("<div/>",{id:"dayBox"+f,css:{overflow:"hidden",height:"100%",width:"100%"}}).html(clickArea=b("<div/>",{html:b("<font/>",{"class":localSettings.fontColor,html:"&nbsp;"}),css:{borderTop:0,borderLeft:0,borderRight:0,width:"100%",height:"16px"}})).append(clickArea2=b("<div/>",{id:"eventBox"+f,css:{borderTop:0,borderLeft:0,borderRight:0,overFlow:"hidden",width:"100%",height:parseInt(realCellHeight-15)},"class":"clickarea2"}))):curDay.html(b("<div/>",{css:{height:realCellHeight},
html:"&nbsp;"}))}d++}}b.fn.dateter.drawHighlight(localSettings);if(a.data("Settings").monthSwitchFn)if(a.data("Settings").initialFetchMonths==0)a.data("Settings").monthSwitchFn(localSettings.month,-1,localSettings.year);else for(v=1;v<parseInt(a.data("Settings").initialFetchMonths);v++){d=Date.today().add(a.data("Settings").monthsMoved-v).months().toString("yyyy");f=Date.today().add(a.data("Settings").monthsMoved-v).months().toString("M");e=Date.today().add(a.data("Settings").monthsMoved+v).months().toString("yyyy");
g=Date.today().add(a.data("Settings").monthsMoved+v).months().toString("M");a.data("Settings").monthSwitchFn(g,-1,e);a.data("Settings").monthSwitchFn(f,-1,d)}}})(jQuery);
